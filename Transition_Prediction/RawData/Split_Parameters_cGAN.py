"""
run the following codes in order:
read the alignment parameters first
draw a baseline to help identify the gait event separation points
record and save the split parameters
"""


## import modules
from Transition_Prediction.RawData.Utility_Functions import Insole_Emg_Alignment, Insole_Data_Splition, Upsampling_Filtering, \
    Insole_Emg_Recovery
import pandas as pd
import numpy as np


## read and preprocess aligned data
project = 'cGAN_Model'
subject = 'Number1'
version = 0
mode = 'down_up'
time = 't1'  # t0 or t1ï¼Œ this is only for cGAN_Model project
session = 5

# read and plot aligned data
left_insole_aligned, right_insole_aligned, emg_aligned = Insole_Emg_Alignment.readAlignedData(subject, session, mode, version, time=time, project=project)
# upsampling and filtering aligned data
left_insole_upsampled, right_insole_upsampled, emg_filtered, emg_reordered, emg_envelope = Upsampling_Filtering.preprocessSensorData(
    left_insole_aligned, right_insole_aligned, emg_aligned, insoleFiltering=False, notchEMG=True, quality_factor=30)
# plot sync force and insole force data
Insole_Emg_Alignment.plotInsoleAlignedEmg(emg_aligned, left_insole_upsampled, right_insole_upsampled, 0, -1, sync_force=True)
# find missing emg index
if project == 'Insole_Emg':
    wrong_timestamp_sync, wrong_timestamp_emg1, wrong_timestamp_emg2 = Insole_Emg_Recovery.findLostSyncData(emg_aligned)
    emg1_missing_indicator, emg2_missing_indicator = Insole_Emg_Recovery.findMissingEngIndex(wrong_timestamp_emg1, wrong_timestamp_emg2,
        len(emg_aligned))
elif project == 'cGAN_Model':
    wrong_timestamp_emg = Insole_Emg_Recovery.findLostEmgData(emg_aligned)


## insert estimated missing sync station emg data at a given position
row_number = 0  # the number of rows to insert
insert_position = 0  # the position to insert rows
zeros_emg = pd.DataFrame(np.zeros((row_number, emg_filtered.shape[1])), index=np.linspace(insert_position, insert_position + 1, row_number).tolist())
emg_inserted = pd.concat([emg_filtered.iloc[:insert_position], zeros_emg, emg_filtered.iloc[insert_position:]]).reset_index(drop=True)
zeros_left = pd.DataFrame(np.zeros((row_number, left_insole_upsampled.shape[1])))
left_inserted = pd.concat([left_insole_upsampled, zeros_left]).reset_index(drop=True)  # add zeros to the end to match the inserted emg length
zeros_right = pd.DataFrame(np.zeros((row_number, right_insole_upsampled.shape[1])))
right_inserted = pd.concat([right_insole_upsampled, zeros_right]).reset_index(drop=True)  # add zeros to the end to match the inserted emg length

# plot sensor data to split gait cycles
start_index = 0
end_index = -1
left_force_baseline = 3
right_force_baseline = 0
left_cross_idx, right_cross_idx = Insole_Data_Splition.plotSplitLine(left_inserted, right_inserted, emg_inserted, start_index, end_index,
    left_force_baseline, right_force_baseline)


## print the cross index between the insole force curve and the baseline
start = 40227  # the first index of the labelling
end = 283576  # the last index of the labelling
start_index = np.where(left_cross_idx == start)[0].item(0)
end_index = np.where(left_cross_idx == end)[0].item(0)
cross_index = np.reshape(left_cross_idx[start_index:end_index+1], (len(left_cross_idx[start_index:end_index+1]), -1))
print(cross_index)


## split results stored in dict (the values refers to the beginning of the gait events)
##
subject = 'Number1'
split_parameters = {
    'experiment_0': {
        'up_down_t0': {
            'session0': {"SSSS": [32500, 80000, 127500, 175000, 217000, 259000, 295000],
                "SSLW": [36220, 81509, 129640, 176422, 218699, 261093, 303686],
                "LW_1": [37244, 82586, 130496, 177082, 219626, 262051, 304500],
                "LWLW_1": [39019, 84379, 132326, 178744, 221394, 263816, 306206],
                "LW_2": [40059, 85357, 133339, 179716, 222336, 264670, 307193],
                "LWSA": [41884, 87156, 135445, 181218, 224016, 266329, 308841],
                "SA_1": [42759, 88158, 136332, 182083, 224870, 267058, 309786],
                "SASA": [44573, 89954, 138314, 183646, 226597, 268753, 311223],
                "SA_2": [45637, 90996, 139170, 184685, 227567, 269718, 312298],
                "SASS": [47625, 92767, 141065, 186471, 229387, 271465, 313981],
                "turnSASD": [48622, 93859, 142082, 187317, 230224, 272397, 315062],
                "SSSD": [59527, 106568, 154843, 197446, 240515, 282615, 325639],
                "SD_1": [60439, 107484, 155599, 198317, 241212, 283408, 326407],
                "SDSD": [62367, 109329, 157554, 200102, 242955, 285062, 328154],
                "SD_2": [63254, 110446, 158436, 200936, 243863, 286044, 329032],
                "SDLW": [64994, 112235, 160142, 202634, 245476, 287668, 330676],
                "LW_3": [65965, 113218, 161027, 203573, 246429, 288561, 331531],
                "LWLW_2": [67716, 114990, 162578, 205309, 247998, 290310, 333222],
                "LW_4": [68711, 116008, 163534, 206246, 249004, 291302, 334291],
                "LWSS": [70580, 118080, 165406, 208070, 250706, 293139, 335917],
                "turnSSSS": [71257, 118841, 166053, 208636, 251369, 293794, 336568], },
            'session1': {"SSSS": [27500, 65000, 120000, 163000, 202000], "SSLW": [30210, 73006, 122262, 166251, 210506],
                "LW_1": [31128, 73757, 123157, 167222, 211266], "LWLW_1": [32864, 75496, 124813, 168784, 213041],
                "LW_2": [33739, 76366, 125709, 169765, 213973], "LWSA": [35362, 78007, 127368, 171381, 215563],
                "SA_1": [36226, 78856, 128199, 172238, 216348], "SASA": [37908, 80521, 130041, 174014, 218120],
                "SA_2": [38859, 81512, 131000, 174908, 219025], "SASS": [40624, 83384, 132889, 176697, 220612],
                "turnSASD": [41528, 84263, 133782, 177719, 221885], "SSSD": [51586, 99838, 143776, 188731, 232719],
                "SD_1": [52504, 100802, 144589, 189582, 233584], "SDSD": [54274, 102427, 146255, 191362, 235285],
                "SD_2": [55125, 103262, 147251, 192284, 236184], "SDLW": [56671, 104742, 149002, 193838, 237845],
                "LW_3": [57585, 105659, 149822, 194814, 238689], "LWLW_2": [59353, 107273, 151474, 196421, 240300],
                "LW_4": [60310, 108230, 152402, 197408, 241322], "LWSS": [61920, 110188, 154116, 199412, 243217],
                "turnSSSS": [62579, 110800, 154843, 200105, 243856]},
            'session2': {"SSSS": [26000, 65000, 113000, 159000, 201000, 247000], "SSLW": [27950, 70001, 115374, 160775, 203236, 248713],
                "LW_1": [28764, 70911, 116329, 161670, 204211, 249639], "LWLW_1": [30571, 72627, 118113, 163348, 205981, 251345],
                "LW_2": [31406, 73594, 118983, 164245, 206860, 252293], "LWSA": [33042, 75115, 120618, 165967, 208604, 253925],
                "SA_1": [33804, 75900, 121449, 166769, 209434, 254893], "SASA": [35465, 77602, 123106, 168488, 211173, 256646],
                "SA_2": [36386, 78611, 124187, 169439, 212268, 257583], "SASS": [38151, 80382, 125920, 171317, 214118, 259318],
                "turnSASD": [39014, 81302, 126742, 172211, 214906, 260116], "SSSD": [48780, 92915, 139134, 182241, 227092, 270083],
                "SD_1": [49602, 93695, 139968, 182921, 227810, 270885], "SDSD": [51373, 95600, 141585, 184611, 229650, 272609],
                "SD_2": [52196, 96534, 142469, 185436, 230640, 273450], "SDLW": [53844, 98231, 143977, 187081, 232396, 275064],
                "LW_3": [54683, 99135, 144963, 187914, 233258, 275885], "LWLW_2": [56494, 100740, 146606, 189465, 234957, 277571],
                "LW_4": [57411, 101719, 147569, 190475, 235898, 278554], "LWSS": [59144, 103609, 149550, 192235, 237791, 280595],
                "turnSSSS": [59827, 104275, 150319, 193066, 238378, 281287], },
            'session3': {"SSSS": [32000, 74000, 113000, 160000, 200800, 245000], "SSLW": [33358, 76033, 118520, 162278, 210892, 253542],
                "LW_1": [34211, 76833, 119421, 163302, 211800, 254388], "LWLW_1": [36004, 78619, 121231, 165104, 213610, 256143],
                "LW_2": [37006, 79551, 122194, 165996, 214483, 257048], "LWSA": [38638, 81131, 123821, 167699, 216060, 258665],
                "SA_1": [39479, 81920, 124658, 168601, 216839, 259487], "SASA": [41083, 83637, 126323, 170300, 218410, 261217],
                "SA_2": [42076, 84668, 127310, 171365, 219346, 262135], "SASS": [43873, 86328, 129069, 173022, 221052, 263853],
                "turnSASD": [44709, 87405, 129849, 173913, 222081, 264832], "SSSD": [54769, 97515, 140199, 187399, 232211, 276137],
                "SD_1": [55564, 98219, 140994, 188497, 233007, 276883], "SDSD": [57228, 99880, 142644, 190490, 234767, 278576],
                "SD_2": [58253, 100832, 143593, 191286, 235634, 279524], "SDLW": [60013, 102395, 145214, 192855, 237260, 281077],
                "LW_3": [60842, 103345, 146102, 193802, 238091, 281988], "LWLW_2": [62642, 105064, 147830, 195363, 239730, 283585],
                "LW_4": [63607, 106059, 148815, 196349, 240772, 284538], "LWSS": [65460, 107934, 150734, 198394, 242719, 286374],
                "turnSSSS": [66153, 108666, 151354, 199032, 243291, 287043], },
            'session4': {"SSSS": [30000, 75000, 112500, 165000, 207500, 247000], "SSLW": [32477, 76374, 122596, 167130, 209886, 254664],
                "LW_1": [33357, 77302, 123546, 167934, 210673, 255854], "LWLW_1": [35024, 78978, 125393, 169643, 212362, 257649],
                "LW_2": [35962, 79868, 126331, 170568, 213286, 258569], "LWSA": [37628, 81444, 127946, 172200, 214830, 260137],
                "SA_1": [38468, 82245, 128824, 173074, 215660, 261124], "SASA": [40124, 83873, 130505, 174820, 217304, 262883],
                "SA_2": [41060, 84937, 131515, 175730, 218294, 263989], "SASS": [42883, 86504, 133213, 177537, 219985, 265568],
                "turnSASD": [43773, 87430, 134145, 178535, 220902, 266560], "SSSD": [54893, 99119, 145857, 188528, 233491, 277887],
                "SD_1": [55771, 99914, 146586, 189309, 234312, 278679], "SDSD": [57568, 101638, 148374, 191076, 236074, 280307],
                "SD_2": [58558, 102514, 149324, 191908, 237077, 281207], "SDLW": [60222, 104156, 150907, 193513, 238823, 282876],
                "LW_3": [61141, 105080, 151865, 194363, 239805, 283696], "LWLW_2": [62786, 106645, 153476, 195976, 241454, 285395],
                "LW_4": [63737, 107637, 154399, 197059, 242402, 286423], "LWSS": [65419, 109493, 156491, 198886, 244088, 288296],
                "turnSSSS": [66134, 110231, 157102, 199614, 244824, 288976], },
            'data_source': [[0, 1, 2, 3, 4], [0, 0, 0, 0, 0]]},
        'down_up_t0': {
            'session1': {"SSSS": [64000, 100000, 143000, 195000, 233000, 287000], "SSLW": [65863, 108493, 152121, 197834, 242922, 288720],
                "LW_1": [66745, 109346, 153138, 198718, 243834, 289807], "LWLW_1": [68497, 111007, 154839, 200475, 245528, 291619],
                "LW_2": [69415, 111767, 155748, 201369, 246416, 292614], "LWSD": [71044, 113582, 157356, 203075, 248095, 294357],
                "SD_1": [72211, 114600, 158388, 204132, 249066, 295394], "SDSD": [73875, 116359, 160191, 205841, 250650, 297094],
                "SD_2": [74845, 117342, 161088, 206710, 251650, 298119], "SDSS": [76673, 119165, 163039, 208611, 253588, 299842],
                "turnSDSA": [77320, 119845, 163645, 209377, 254300, 300713], "SSSA": [86928, 129756, 174882, 220399, 266714, 311022],
                "SA_1": [87860, 130583, 175817, 221209, 267578, 311941], "SASA": [89520, 132333, 177598, 222970, 269392, 313647],
                "SA_2": [90447, 133230, 178533, 223874, 270352, 314552], "SALW": [92106, 134920, 180198, 225502, 272058, 316192],
                "LW_3": [93095, 135912, 181342, 226661, 273285, 317283], "LWLW_2": [94635, 137546, 182976, 228304, 274808, 318883],
                "LW_4": [95589, 138443, 183910, 229221, 275800, 319839], "LWSS": [97518, 140144, 185659, 230950, 277657, 321705],
                "turnSSSS": [98138, 140858, 186404, 231532, 278317, 322350], },
            'session2': {"SSSS": [38000, 82000, 126000, 173000, 210000, 260000], "SSLW": [39628, 84457, 128610, 174779, 218073, 263396],
                "LW_1": [40465, 85506, 129648, 175886, 219075, 264375], "LWLW_1": [42176, 87411, 131375, 177668, 220745, 266177],
                "LW_2": [43109, 88403, 132306, 178580, 221673, 267066], "LWSD": [44766, 90123, 133950, 180229, 223356, 268752],
                "SD_1": [45716, 91195, 134954, 181224, 224394, 269704], "SDSD": [47370, 92880, 136667, 182743, 225926, 271394],
                "SD_2": [48278, 93818, 137646, 183820, 226974, 272401], "SDSS": [50188, 95419, 139681, 185648, 228771, 274302],
                "turnSDSA": [50932, 96254, 140596, 186490, 229569, 274904], "SSSA": [60759, 105847, 152097, 196469, 239816, 285907],
                "SA_1": [61628, 106761, 153138, 197600, 240583, 286907], "SASA": [63446, 108590, 154945, 199298, 242391, 288594],
                "SA_2": [64406, 109586, 155966, 200286, 243319, 289570], "SALW": [66116, 111123, 157778, 201908, 244907, 291200],
                "LW_3": [67256, 112228, 158937, 202938, 245921, 292359], "LWLW_2": [68908, 113929, 160522, 204632, 247608, 294116],
                "LW_4": [69850, 114878, 161476, 205568, 248564, 295031], "LWSS": [71672, 116672, 163216, 207529, 250390, 296844],
                "turnSSSS": [72360, 117356, 164130, 208147, 250978, 297511], },
            'session3': {"SSSS": [32000, 68000, 118000, 162000, 207000, 246000], "SSLW": [33343, 76324, 120226, 164210, 209682, 257125],
                "LW_1": [34254, 77099, 121084, 165071, 210506, 258139], "LWLW_1": [36035, 78845, 122870, 166842, 212323, 259813],
                "LW_2": [36915, 79756, 123776, 167721, 213236, 260712], "LWSD": [38533, 81330, 125492, 169483, 214935, 262341],
                "SD_1": [39617, 82345, 126531, 170526, 215943, 263247], "SDSD": [41342, 84017, 128265, 172132, 217714, 264865],
                "SD_2": [42248, 84987, 129128, 173199, 218591, 265847], "SDSS": [44012, 86807, 131101, 175024, 220614, 267899],
                "turnSDSA": [44687, 87770, 131670, 175867, 221146, 268633], "SSSA": [54881, 97359, 142232, 186609, 232642, 281330],
                "SA_1": [55713, 98262, 143182, 187615, 233557, 282243], "SDSD": [57453, 100088, 144824, 189480, 235474, 283865],
                "SA_2": [58346, 101011, 145606, 190360, 236507, 284956], "SALW": [60124, 102782, 147336, 192079, 238276, 286603],
                "LW_3": [61041, 103822, 148431, 193113, 239508, 287725], "LWLW_2": [62710, 105346, 150103, 194725, 241151, 289415],
                "LW_4": [63598, 106208, 151066, 195606, 242132, 290332], "LWSS": [65205, 108041, 152867, 197263, 243865, 292176],
                "turnSSSS": [66175, 108649, 153588, 197972, 244764, 292762], },
            'session4': {"SSSS": [30000, 73000, 118000, 166000, 216000, 264000], "SSLW": [32555, 76008, 128614, 176601, 226567, 274668],
                "LW_1": [33513, 77001, 129479, 177531, 227684, 275662], "LWLW_1": [35343, 78705, 131069, 179228, 229522, 277490],
                "LW_2": [36289, 79645, 132068, 180121, 230451, 278444], "LWSD": [37930, 81362, 133689, 181715, 232152, 280265],
                "SD_1": [39001, 82343, 134735, 182745, 233151, 281437], "SDSD": [40600, 83996, 136498, 184363, 234763, 283063],
                "SD_2": [41544, 84988, 137371, 185374, 235688, 284110], "SDSS": [43356, 86822, 139352, 187182, 237510, 285949],
                "turnSDSA": [44185, 87686, 139882, 187988, 238190, 286791], "SSSA": [53728, 102929, 151877, 203126, 250995, 297267],
                "SA_1": [54666, 103823, 152966, 204022, 251954, 298443], "SASA": [56495, 105579, 154687, 205651, 253548, 300275],
                "SA_2": [57364, 106582, 155771, 206632, 254508, 301222], "SALW": [59023, 108295, 157279, 208378, 256286, 302968],
                "LW_3": [60101, 109473, 158627, 209380, 257448, 304095], "LWLW_2": [61822, 111068, 160315, 211056, 259160, 305886],
                "LW_4": [62751, 111983, 161281, 211961, 260080, 306837], "LWSS": [64641, 114010, 163110, 213776, 261968, 308666],
                "turnSSSS": [65609, 114595, 163945, 214481, 262610, 309344], },
            'session5': {"SSSS": [45000, 91000, 139000, 186000, 234000, 281000], "SSLW": [47159, 93301, 141883, 189643, 236581, 283278],
                "LW_1": [48171, 94092, 142823, 190571, 237520, 284191], "LWLW_1": [49929, 95676, 144568, 192324, 239292, 285975],
                "LW_2": [50888, 96600, 145441, 193300, 240197, 286888], "LWSD": [52533, 98295, 147117, 194988, 241873, 288658],
                "SD_1": [53612, 99233, 148120, 195907, 242808, 289647], "SDSD": [55297, 100966, 149922, 197468, 244417, 291303],
                "SD_2": [56156, 101796, 150813, 198438, 245312, 292279], "SDSS": [57755, 103509, 152539, 200258, 247055, 294060],
                "turnSDSA": [58615, 104234, 153297, 201264, 247886, 294710], "SSSA": [69004, 116395, 165398, 213230, 260216, 307028],
                "SA_1": [69791, 117379, 166326, 214010, 261368, 308044], "SASA": [71545, 119150, 167994, 215613, 263069, 309770],
                "SA_2": [72376, 120038, 168977, 216553, 264057, 310732], "SALW": [74097, 121750, 170695, 218229, 265695, 312397],
                "LW_3": [75239, 122833, 171871, 219353, 266802, 313594], "LWLW_2": [76874, 124563, 173610, 221014, 268561, 315309],
                "LW_4": [77730, 125476, 174568, 221875, 269509, 316183], "LWSS": [79630, 127329, 176477, 223800, 271367, 317878],
                "turnSSSS": [80308, 128009, 177107, 224362, 272113, 318390], },
            'data_source': [1, 2, 3, 4, 5]},
        'up_down_t1': {
            'session0': {"SSSS": [60000, 103000, 140000, 182500, 225000, 270000], "SSLW": [62888, 105420, 148009, 190824, 233612, 276110],
                "LW_1": [63795, 106241, 148924, 191598, 234366, 276944], "LWLW_1": [65488, 107881, 150676, 193352, 235950, 278872],
                "LW_2": [66401, 108887, 151556, 194209, 236885, 279697], "LWSA": [68085, 110499, 153273, 195820, 238495, 281271],
                "SA_1": [68952, 111431, 154034, 196723, 239363, 282100], "SASA": [70630, 113091, 155660, 198325, 241026, 283594],
                "SA_2": [71645, 114056, 156729, 199429, 241967, 284695], "SASS": [73392, 115832, 158487, 201052, 243738, 286245],
                "turnSASD": [74301, 116876, 159456, 201938, 244806, 287265], "SSSD": [84053, 127055, 169522, 211813, 254833, 297531],
                "SD_1": [84849, 127778, 170269, 212705, 255600, 298280], "SDSD": [86592, 129473, 171957, 214505, 257419, 299997],
                "SD_2": [87597, 130369, 172924, 215334, 258305, 300885], "SDLW": [89505, 131989, 174571, 217034, 259856, 302531],
                "LW_3": [90442, 132973, 175518, 218015, 260896, 303496], "LWLW_2": [92036, 134644, 177083, 219679, 262482, 305122],
                "LW_4": [92997, 135588, 178122, 220570, 263380, 306070], "LWSS": [94862, 137276, 180095, 222402, 265272, 307952],
                "turnSSSS": [95566, 138042, 180768, 223155, 265883, 308601], },
            'session1': {"SSSS": [24000, 66000, 108000, 145000, 196000, 239000], "SSLW": [25525, 67575, 110309, 153189, 197366, 239992],
                "LW_1": [26258, 68507, 111284, 154038, 198224, 240902], "LWLW_1": [27937, 70281, 113085, 155709, 199976, 242677],
                "LW_2": [28900, 71232, 114028, 156670, 200864, 243571], "LWSA": [30511, 72818, 115607, 158291, 202505, 245220],
                "SA_1": [31409, 73767, 116539, 159200, 203318, 246083], "SASA": [33118, 75560, 118313, 160810, 204979, 247745],
                "SA_2": [34029, 76475, 119293, 161797, 205781, 248711], "SASS": [35756, 78239, 121025, 163760, 207591, 250369],
                "turnSASD": [36704, 79309, 122027, 164775, 208533, 251375], "SSSD": [46512, 89137, 132009, 176315, 218669, 261519],
                "SD_1": [47273, 89988, 132844, 177144, 219548, 262335], "SDSD": [49019, 91775, 134501, 178879, 221243, 264266],
                "SD_2": [49991, 92722, 135477, 179821, 222138, 265161], "SDLW": [51700, 94357, 137113, 181481, 223829, 266792],
                "LW_3": [52587, 95344, 138026, 182413, 224771, 267756], "LWLW_2": [54255, 97002, 139602, 184146, 226415, 269500],
                "LW_4": [55209, 98017, 140581, 185128, 227386, 270392], "LWSS": [57030, 99793, 142508, 186880, 229316, 272262],
                "turnSSSS": [57861, 100582, 143251, 187538, 230002, 273022], },
            'session2': {"SSSS": [26000, 69000, 105000, 148000, 198000, 234000], "SSLW": [27876, 70849, 113439, 156976, 199626, 242351],
                "LW_1": [28670, 71645, 114288, 157948, 200597, 243295], "LWLW_1": [30509, 73396, 116021, 159720, 202301, 245229],
                "LW_2": [31397, 74299, 116941, 160714, 203233, 246053], "LWSA": [32981, 75851, 118628, 162315, 204830, 247676],
                "SA_1": [33908, 76751, 119465, 163226, 205706, 248554], "SASA": [35690, 78226, 121153, 164878, 207335, 250220],
                "SA_2": [36666, 79289, 122134, 165978, 208414, 251253], "SASS": [38411, 81086, 123954, 167800, 210220, 253075],
                "turnSASD": [39418, 82009, 124867, 168804, 211176, 254106], "SSSD": [49202, 92205, 134690, 178687, 221220, 264038],
                "SD_1": [50103, 92982, 135571, 179571, 222052, 264899], "SDSD": [51841, 94695, 137198, 181264, 223835, 266553],
                "SD_2": [52754, 95709, 138161, 182214, 224675, 267542], "SDLW": [54486, 97282, 139834, 183805, 226316, 269145],
                "LW_3": [55411, 98237, 140682, 184769, 227179, 270063], "LWLW_2": [57125, 99869, 142346, 186491, 228856, 271676],
                "LW_4": [58096, 100856, 143387, 187551, 229875, 272756], "LWSS": [59909, 102823, 145218, 189427, 231665, 274690],
                "turnSSSS": [60689, 103633, 145957, 190082, 232422, 275322], },
            'session3': {"SSSS": [36000, 73000, 124000, 168000, 213000], "SSLW": [38094, 81874, 126761, 170166, 214749],
                "LW_1": [38961, 82767, 127592, 171040, 215736], "LWLW_1": [40739, 84549, 129283, 172784, 217458],
                "LW_2": [41767, 85495, 130235, 173712, 218436], "LWSA": [43482, 87116, 131973, 175441, 220109],
                "SA_1": [44443, 87952, 132799, 176439, 220928], "SASA": [46101, 89527, 134585, 178004, 222483],
                "SA_2": [47060, 90616, 135584, 179146, 223450], "SASS": [48805, 92345, 137176, 180742, 225210],
                "turnSASD": [49889, 93325, 138301, 181793, 226069], "SSSD": [59523, 104702, 149004, 192460, 234292],
                "SD_1": [60452, 105512, 149799, 193237, 235261], "SDSD": [62255, 107258, 151465, 195078, 237040],
                "SD_2": [63131, 108258, 152441, 196032, 237924], "SDLW": [65012, 109742, 153955, 197765, 239576],
                "LW_3": [65832, 110745, 154939, 198749, 240535], "LWLW_2": [67592, 112471, 156565, 200432, 242092],
                "LW_4": [68516, 113527, 157627, 201436, 243094], "LWSS": [70315, 115216, 159498, 203442, 244837],
                "turnSSSS": [71132, 116047, 160184, 204139, 245614], },
            'session4': {"SSSS": [25000, 67000, 103000, 146000, 189000, 238000], "SSLW": [27022, 69356, 112057, 154532, 197548, 240127],
                "LW_1": [27855, 70333, 112959, 155587, 198442, 241077], "LWLW_1": [29634, 72076, 114699, 157274, 200118, 242900],
                "LW_2": [30510, 73015, 115569, 158236, 201015, 243728], "LWSA": [32147, 74690, 117227, 159935, 202601, 245422],
                "SA_1": [33120, 75556, 118104, 160797, 203493, 246244], "SASA": [34646, 77040, 119764, 162677, 205144, 247885],
                "SA_2": [35568, 78162, 120793, 163599, 206190, 248893], "SASS": [37348, 79853, 122475, 165329, 207907, 250562],
                "turnSASD": [38349, 80824, 123482, 166351, 208834, 251508], "SSSD": [48165, 91075, 133658, 176035, 218857, 261926],
                "SD_1": [49018, 91808, 134449, 176901, 219734, 262656], "SDSD": [50773, 93565, 136061, 178565, 221503, 264305],
                "SD_2": [51651, 94441, 137002, 179581, 222484, 265282], "SDLW": [53353, 96016, 138556, 181250, 224031, 266932],
                "LW_3": [54269, 96929, 139443, 182130, 224934, 267775], "LWLW_2": [55963, 98519, 141074, 183729, 226486, 269438],
                "LW_4": [56957, 99548, 142004, 184661, 227430, 270414], "LWSS": [58796, 101346, 143844, 186448, 229290, 272101],
                "turnSSSS": [59496, 102022, 144613, 187255, 230063, 272866]},
            'data_source': [0, 1, 2, 3, 4]},
        'down_up_t1': {
            'session1': {"SSSS": [45000, 69000, 111000, 144000, 193500, 230000], "SSLW": [32530, 71768, 112626, 152694, 195240, 237831],
                "LW_1": [33465, 72770, 113513, 153584, 196242, 238758], "LWLW_1": [35194, 74496, 115233, 155265, 197972, 240449],
                "LW_2": [36008, 75356, 116151, 156160, 198911, 241402], "LWSD": [37638, 76974, 117822, 157832, 200489, 243049],
                "SD_1": [38608, 78045, 118790, 158818, 201420, 243931], "SDSD": [40263, 79709, 120531, 160446, 203033, 245438],
                "SD_2": [41230, 80676, 121476, 161421, 204059, 246465], "SDSS": [43075, 82720, 123332, 163245, 205945, 248271],
                "turnSDSA": [43812, 83459, 123966, 163952, 206692, 248947], "SSSA": [50951, 92728, 131800, 173745, 216094, 257751],
                "SA_1": [52018, 93695, 132506, 174733, 217163, 258676], "SASA": [53765, 95294, 134046, 176388, 218735, 260464],
                "SA_2": [54714, 96148, 134939, 177332, 219736, 261412], "SALW": [56515, 97773, 136596, 178964, 221245, 263071],
                "LW_3": [57621, 98834, 137565, 180019, 222473, 264150], "LWLW_2": [59255, 100450, 139199, 181663, 224212, 265787],
                "LW_4": [60108, 101289, 140084, 182608, 225128, 266687], "LWSS": [61915, 102971, 141789, 184355, 226867, 268528],
                "turnSSSS": [62600, 103747, 142491, 185180, 227743, 269188], },
            'session2': {"SSSS": [30000, 72000, 115000, 149000, 192000, 241000], "SSLW": [32422, 73840, 116446, 157347, 200342, 243159],
                "LW_1": [33408, 74746, 117542, 158429, 201315, 244124], "LWLW_1": [35157, 76417, 119346, 160136, 203046, 245825],
                "LW_2": [36112, 77356, 120198, 161075, 204005, 246793], "LWSD": [37746, 78962, 121854, 162741, 205665, 248396],
                "SD_1": [38745, 80011, 122824, 163702, 206692, 249341], "SDSD": [40226, 81723, 124468, 165398, 208331, 250888],
                "SD_2": [41213, 82686, 125373, 166356, 209323, 251867], "SDSS": [42863, 84477, 127217, 168326, 211323, 253658],
                "turnSDSA": [43701, 85121, 127992, 169174, 211976, 254520], "SSSA": [52645, 94911, 136469, 178774, 221478, 264072],
                "SA_1": [53506, 95706, 137410, 179680, 222407, 265110], "SASA": [55169, 97359, 139033, 181424, 224081, 266668],
                "SA_2": [56155, 98351, 139995, 182327, 224993, 267706], "SALW": [57772, 99938, 141615, 184039, 226619, 269353],
                "LW_3": [58851, 101223, 142689, 185185, 227722, 270398], "LWLW_2": [60449, 102863, 144344, 186827, 229318, 272025],
                "LW_4": [61230, 103825, 145192, 187810, 230269, 272796], "LWSS": [63079, 105549, 146964, 189576, 232096, 274790],
                "turnSSSS": [63767, 106234, 147673, 190348, 232809, 275634], },
            'session3': {"SSSS": [40000, 81000, 116000, 160000, 212000, 254000], "SSLW": [41834, 82940, 125665, 169637, 213559, 255597],
                "LW_1": [42700, 83786, 126483, 170493, 214502, 256582], "LWLW_1": [44355, 85478, 128272, 172285, 216168, 258332],
                "LW_2": [45263, 86429, 129146, 173224, 217086, 259384], "LWSD": [46871, 88040, 130783, 174951, 218723, 260992],
                "SD_1": [47907, 89029, 131761, 175917, 219673, 262036], "SDSD": [49474, 90559, 133255, 177554, 221279, 263702],
                "SD_2": [50306, 91585, 134122, 178486, 222245, 264724], "SDSS": [52248, 93448, 136086, 180362, 224133, 266666],
                "turnSDSA": [53053, 94141, 136773, 181095, 224975, 267481], "SSSA": [61879, 104195, 146959, 192040, 234076, 276172],
                "SA_1": [62625, 104987, 147753, 193002, 235249, 277206], "SASA": [64311, 106528, 149541, 194571, 236961, 278706],
                "SA_2": [65224, 107439, 150492, 195632, 237907, 279692], "SALW": [66811, 109111, 152122, 197175, 239615, 281365],
                "LW_3": [67851, 110135, 153232, 198319, 240701, 282429], "LWLW_2": [69468, 111708, 154723, 199989, 242436, 284032],
                "LW_4": [70351, 112637, 155659, 200913, 243382, 284932], "LWSS": [72079, 114354, 157434, 202580, 245076, 286722],
                "turnSSSS": [72934, 115127, 158193, 203512, 245838, 287421], },
            'session4': {"SSSS": [39000, 74000, 116000, 159000, 201000, 250000], "SSLW": [40227, 82634, 124596, 167142, 209655, 252025],
                "LW_1": [41182, 83583, 125478, 167967, 210528, 252947], "LWLW_1": [42820, 85243, 127149, 169776, 212374, 254696],
                "LW_2": [43794, 86190, 128077, 170661, 213231, 255602], "LWSD": [45466, 87888, 129820, 172232, 214947, 257332],
                "SD_1": [46498, 88958, 130755, 173213, 215921, 258339], "SDSD": [48125, 90579, 132573, 174681, 217532, 259985],
                "SD_2": [49057, 91627, 133477, 175724, 218442, 260978], "SDSS": [50818, 93601, 135397, 177688, 220252, 262742],
                "turnSDSA": [51629, 94329, 136226, 178198, 221016, 263644], "SSSA": [61266, 103066, 145649, 187977, 230236, 272292],
                "SA_1": [62156, 104002, 146491, 188875, 231271, 273155], "SASA": [63901, 105718, 148107, 190579, 232995, 274813],
                "SA_2": [64893, 106687, 149232, 191566, 234004, 275795], "SALW": [66625, 108309, 150842, 193170, 235752, 277494],
                "LW_3": [67591, 109475, 151983, 194260, 236937, 278565], "LWLW_2": [69225, 111101, 153555, 195938, 238547, 280228],
                "LW_4": [70141, 112067, 154555, 196858, 239540, 281172], "LWSS": [71810, 113727, 156348, 198683, 241459, 282830],
                "turnSSSS": [72743, 114413, 157229, 199476, 242173, 283576], },
            'session5': {"SSSS": [20100, 66100, 103100, 151100, 193100, 235100], "SSLW": [26468, 68451, 110931, 153441, 195025, 237676],
                "LW_1": [27389, 69266, 111798, 154314, 195965, 238636], "LWLW_1": [29428, 71281, 113742, 156228, 197914, 240533],
                "LW_2": [30299, 72085, 114551, 156998, 198716, 241396], "LWSD": [32171, 73892, 116436, 158944, 200486, 243377],
                "SD_1": [33202, 74937, 117323, 159929, 201440, 244206], "SDSD": [34929, 76759, 118938, 161612, 203049, 245946],
                "SD_2": [35966, 77614, 119857, 162541, 204039, 246574], "SDSS": [37881, 79620, 121936, 164703, 205991, 248705],
                "turnSDSA": [38488, 80114, 122507, 165470, 206541, 249383], "SSSA": [47257, 89422, 132587, 173606, 215661, 258744],
                "SA_1": [48000, 90285, 133474, 174485, 216853, 259780], "SASA": [49773, 92213, 135331, 176577, 218710, 261655],
                "SA_2": [50557, 93149, 136303, 177480, 219611, 262582], "SALW": [52418, 95037, 137951, 179353, 221460, 264463],
                "LW_3": [53302, 96023, 138954, 180527, 222430, 265469], "LWLW_2": [54944, 97876, 140711, 182232, 224359, 267204],
                "LW_4": [55759, 98768, 141523, 183028, 225208, 268128], "LWSS": [57739, 100900, 143500, 184966, 227300, 270118],
                "turnSSSS": [58297, 101720, 143996, 185810, 227804, 270782]},
            'data_source': [1, 2, 3, 4, 5]},
    },
}


## A simple check: the later parameters should always be larger than the former parameter, otherwise wrong
for experiment_version, experiment_data in split_parameters.items():
    for mode, mode_data in experiment_data.items():
        for session, session_data in mode_data.items():
            if session != 'data_source':
                session_dataframe = pd.DataFrame(session_data)
                if not session_dataframe.empty:
                    session_flatten = session_dataframe.to_numpy().flatten()
                    session_diff = np.diff(session_flatten)
                    wrong_index = np.argwhere(session_diff < 0) + 2  # the expected interval should normally be ~1000 or ~10000. (+2 is the index correction)
                    if wrong_index.size != 0:
                        print("wrong parameters:", experiment_version, mode, session, wrong_index)


## save split results to json files
Insole_Data_Splition.saveSplitParameters(subject, split_parameters, project=project)


## plot certain columns to check if any column has some zero emg values
# for i in range(0, emg_preprocessed.shape[1], 10):
# for i in range(0, 10, 10):
#     column_plotting = range(i, i+10)
#     emg_preprocessed.iloc[:, column_plotting].plot(subplots=True)
#     plt.tight_layout()
#     plt.show()